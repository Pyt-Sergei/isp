============================================================================================================================

Команды запуска программы:

ПЕРЕЙДИТЕ В КОРНЕВУЮ ДИРЕКТОРИЮ ISPproject И, НАХОДЯСЬ ТАМ, ВЫПОЛНЯЙТЕ НИЖЕПЕРЕЧИСЛЕННЫЕ КОМАНДЫ

-----------------------------------------------------------------------------------------
Создание виртуального оружения:
python3 -m venv venv

Активация виртуального окружения:
source venv/bin/activate

-----------------------------------------------------------------------------------------

Запуск сервера FLASK:
export FLASK_APP=flaskr
export FLASK_ENV=development
flask run --host=0.0.0.0

-----------------------------------------------------------------------------------------

Запуск redis сервера (в качестве брокера сообщений celery и бэкенда результатов задач):
redis-server

Выключить: ctrl+c
Если не получится:
ps aux|grep redis
kill -9 <redis pid>

-----------------------------------------------------------------------------------------

Запуск celery worker:
celery -A flaskr.celery_app.celery worker --loglevel=INFO

===========================================================================================================================

===========================================================================================================================

Список доступных url адресов:

===========================================================================================================================
API:
/
/user
/archive/
/archive/<string:task_id>

/auth/register
/auth/login
/auth/logout
-----------------------------------------------------------------------------------------

Сайт:
Путь до стартовой страницы: /site/home/

============================================================================================================================

Примеры команд тестирования API:

url = http://download.ispsystem.com/OSTemplate/new/latest/Debian-7-amd64-netinstall-5.57.tar.gz
curl -F url=http://download.ispsystem.com/OSTemplate/new/latest/Debian-7-amd64-netinstall-5.57.tar.gz http://127.0.0.1:5000/archive/

curl -F file=@/mnt/c/Users/пользователь/Desktop/largearchive.tar.gz http://127.0.0.1:5000/archive/
curl -F file=@/mnt/c/Users/пользователь/Desktop/archive.tar.gz http://127.0.0.1:5000/archive/

!ВНИМАНИЕ!
Если вы хотите протестировать авторизацию, следует делать это на сайте, но не в терминале, так как данные пользователя после
авторизации хранятся в объекте session (flask), благодаря чему пользователь остается авторизованным переходя на другие страницы сайта,
что невозможно при выполнении команд через терминал, т.к. объект session основывается на сессионных куки, которые в свою очередь
по умолчанию хранят данные в бразуере до его закрытия.

============================================================================================================================

Источники:
https://flask.palletsprojects.com/en/2.0.x/quickstart/
curl documentation: https://curl.se/docs/httpscripting.html
https://docs.python-requests.org/en/latest/
https://docs.python.org/3/library/asyncio.html
https://docs.celeryproject.org/en/stable/getting-started/introduction.html

